{% extends 'base-super_admin.html.twig' %}

{% block header %}
    {{ 'adm.evenement.index.heading'|trans({}, 'evenement') }}
{% endblock %}

{% block headeractions %}
    <div class="header-action">
        {{ include('composants/sadm-buttons-index.html.twig', {elt:'evenement'}) }}
    </div>
{% endblock %}

{% block content %}
    <div class="card">
        <h4 class="card-title">{{ 'adm.evenement.index.heading'|trans({}, 'evenement') }}</h4>
        <div class="card-body">
            <table class="table table-striped table-bordered">
                <thead>
                <tr>
                    <th>{{ 'table.libelle'|trans }}</th>
                    <th>{{ 'table.date'|trans }}</th>
                    <th>{{ 'table.heure_debut'|trans }}</th>
                    <th>{{ 'table.heure_fin'|trans }}</th>
                    <th>{{ 'table.participants'|trans }}</th>
                    <th>{{ 'table.actions'|trans }}</th>
                </tr>
                </thead>
                <tbody>
                {% for evenement in evenements %}
                    <tr id="ligne_{{ evenement.id }}">
                        <td>{{ evenement.libelle }}</td>
                        <td>{{ evenement.date ? evenement.date|format_date('long') : '' }}</td>
                        <td>{{ evenement.debut ? evenement.debut|date('H:i') : '' }}</td>
                        <td>{{ evenement.fin ? evenement.fin|date('H:i') : '' }}</td>
                        <td>{{ evenement.etudiantEvenements|length }}</td>
                        <td style="display: flex; justify-content: flex-end; gap: 5px; align-items: center">
                            {% set key = qrKeys[evenement.id]|default('') %}
                            {% if key != '' %}
                                <a class="btn btn-sm btn-info" href="{{ path('sa_evenement_qr_pdf', {key: key}) }}" title="{{ 'adm.evenement.exporterqrpdf'|trans({}, 'evenement') }}" data-bs-toggle="tooltip" data-bs-placement="bottom">
                                    <i class="{{ iconQrCode }}"></i>
                                </a>
                            {% endif %}
                            <a class="btn btn-sm btn-secondary" href="{{ path('sa_evenement_show', {id: evenement.id}) }}" title="{{ 'adm.evenement.exporterresultxlsx'|trans({}, 'evenement') }}" data-bs-toggle="tooltip" data-bs-placement="bottom">
                                <i class="fas fa-download"></i>
                            </a>
                            {{ include('composants/sadm-buttons-table-index.html.twig', {elt:'evenement', id: evenement.id}) }}
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="6">{{ 'no.record.found'|trans }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
